function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.MicroModal=t()}(this,function(){"use strict";var e,c,n,i,d,t=function(){function n(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}}(),k=function(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)};return e=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],c=function(){function w(e){var t=e.targetModal,o=e.triggers,n=void 0===o?[]:o,i=e.onShow,r=void 0===i?function(){}:i,a=e.onClose,s=void 0===a?function(){}:a,l=e.openTrigger,c=void 0===l?"data-micromodal-trigger":l,d=e.closeTrigger,u=void 0===d?"data-micromodal-close":d,f=e.disableScroll,h=void 0!==f&&f,v=e.disableFocus,m=void 0!==v&&v,g=e.awaitCloseAnimation,b=void 0!==g&&g,y=e.debugMode,p=void 0!==y&&y;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),this.modal=document.getElementById(t),this.config={debugMode:p,disableScroll:h,openTrigger:c,closeTrigger:u,onShow:r,onClose:s,awaitCloseAnimation:b,disableFocus:m},0<n.length&&this.registerTriggers.apply(this,k(n)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}return t(w,[{key:"registerTriggers",value:function(){for(var t=this,e=arguments.length,o=Array(e),n=0;n<e;n++)o[n]=arguments[n];o.forEach(function(e){e.addEventListener("click",function(){return t.showModal()})})}},{key:"showModal",value:function(){this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add("is-open"),this.setFocusToFirstNode(),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.onShow(this.modal)}},{key:"closeModal",value:function(){var t=this.modal;this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement.focus(),this.config.onClose(this.modal),this.config.awaitCloseAnimation?this.modal.addEventListener("animationend",function e(){t.classList.remove("is-open"),t.removeEventListener("animationend",e,!1)},!1):t.classList.remove("is-open")}},{key:"scrollBehaviour",value:function(e){if(this.config.disableScroll){var t=document.querySelector("body");switch(e){case"enable":Object.assign(t.style,{overflow:"",height:""});break;case"disable":Object.assign(t.style,{overflow:"hidden",height:"100vh"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(e){e.target.hasAttribute(this.config.closeTrigger)&&(this.closeModal(),e.preventDefault())}},{key:"onKeydown",value:function(e){27===e.keyCode&&this.closeModal(e),9===e.keyCode&&this.maintainFocus(e)}},{key:"getFocusableNodes",value:function(){var t=this.modal.querySelectorAll(e);return Object.keys(t).map(function(e){return t[e]})}},{key:"setFocusToFirstNode",value:function(){if(!this.config.disableFocus){var e=this.getFocusableNodes();e.length&&e[0].focus()}}},{key:"maintainFocus",value:function(e){var t=this.getFocusableNodes();if(this.modal.contains(document.activeElement)){var o=t.indexOf(document.activeElement);e.shiftKey&&0===o&&(t[t.length-1].focus(),e.preventDefault()),e.shiftKey||o!==t.length-1||(t[0].focus(),e.preventDefault())}else t[0].focus()}}]),w}(),n=null,i=function(e){if(!document.getElementById(e))return console.warn("MicroModal v0.3.1: ❗Seems like you have missed %c'"+e+"'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'+e+'"></div>'),!1},d=function(e,t){if(function(e){if(e.length<=0)console.warn("MicroModal v0.3.1: ❗Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>')}(e),!t)return!0;for(var o in t)i(o);return!0},{init:function(e){var t,o,n,i=Object.assign({},{openTrigger:"data-micromodal-trigger"},e),r=[].concat(k(document.querySelectorAll("["+i.openTrigger+"]"))),a=(t=r,o=i.openTrigger,n=[],t.forEach(function(e){var t=e.attributes[o].value;void 0===n[t]&&(n[t]=[]),n[t].push(e)}),n);if(!0!==i.debugMode||!1!==d(r,a))for(var s in a){var l=a[s];i.targetModal=s,i.triggers=[].concat(k(l)),new c(i)}},show:function(e,t){var o=t||{};o.targetModal=e,!0===o.debugMode&&!1===i(e)||(n=new c(o)).showModal()},close:function(){n.closeModal()}}}),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert first argument to object");for(var o=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r=Object.keys(Object(i)),a=0,s=r.length;a<s;a++){var l=r[a],c=Object.getOwnPropertyDescriptor(i,l);void 0!==c&&c.enumerable&&(o[l]=i[l])}}return o}}),Array.from||(Array.from=function(){var t=Object.prototype.toString,l=function(e){return"function"==typeof e||"[object Function]"===t.call(e)},n=Math.pow(2,53)-1,c=function(e){var t,o=(t=Number(e),isNaN(t)?0:0!==t&&isFinite(t)?(0<t?1:-1)*Math.floor(Math.abs(t)):t);return Math.min(Math.max(o,0),n)};return function(e){var t=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o,n=1<arguments.length?arguments[1]:void 0;if(void 0!==n){if(!l(n))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(o=arguments[2])}for(var i,r=c(t.length),a=l(this)?Object(new this(r)):new Array(r),s=0;s<r;)i=t[s],a[s]=n?void 0===o?n(i,s):n.call(o,i,s):i,s+=1;return a.length=r,a}}());